!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=Phaser},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GAME_WIDTH=window.innerWidth*window.devicePixelRatio,e.GAME_HEIGHT=window.innerHeight*window.devicePixelRatio,e.SCALE_RATIO=window.devicePixelRatio/3,e.PHYSICS_DEFAULT="arcade",e.GRAVITY=300,e.MAIN_SCENE="main-scene",e.TITLE_SCENE="title-scene",e.BOARD_SIZE=8,e.TILE_SIZE=300*e.SCALE_RATIO,e.BOARD_BORDER_SIZE=5,e.BOARD_PX_LENGTH=e.BOARD_SIZE*e.TILE_SIZE+2*e.BOARD_BORDER_SIZE,console.log("SCALE_RATIO",e.SCALE_RATIO),console.log("TILE_SIZE",e.TILE_SIZE)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),new(n(3).MainGame)},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(0)),c=n(1),u=n(4),s=n(7),f=function(t){function e(){return t.call(this,{type:a.default.AUTO,width:c.GAME_WIDTH,height:c.GAME_HEIGHT,backgroundColor:2171169,physics:{default:c.PHYSICS_DEFAULT,arcade:{gravity:{y:c.GRAVITY}}},scene:[new u.StartScene(c.MAIN_SCENE),new s.MainScene]})||this}return r(e,t),e}(a.default.Game);e.MainGame=f},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(5)),c=i(n(6)),u=n(1),s=function(t){function e(e){var n=t.call(this,u.TITLE_SCENE)||this;return n.preload=function(){n.load.bitmapFont("deadman",c.default,a.default)},n.create=function(){n.scene.start(n.nextScene),n.cameras.main.setBackgroundColor(3622735)},n.nextScene=e,n}return r(e,t),e}(n(0).Scene);e.StartScene=s},function(t,e,n){t.exports=n.p+"3c70275686df9ff4905f127f9660bf9c.fnt"},function(t,e,n){t.exports=n.p+"6586733eacb3d22bdf34f7c73ffd0430.png"},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(8),c=n(9),u=function(t){function e(){var e=t.call(this,i.MAIN_SCENE)||this;return e.preload=function(){var t;e.load.on("progress",(function(n){t||(t=new a.ProgressBar(e,i.GAME_WIDTH/2,i.GAME_HEIGHT/2)),t.setProgress(n)})),e.load.on("complete",(function(){console.log("complete"),t.destroy()})),e.load.setBaseURL("http://labs.phaser.io");for(var n=0;n<10;n++);},e.create=function(){e.add.existing(new c.MatchBoard(e,i.GAME_WIDTH/2-i.BOARD_PX_LENGTH/2,i.GAME_HEIGHT/2-i.BOARD_PX_LENGTH/2))},e}return r(e,t),e}(Phaser.Scene);e.MainScene=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;return r.setProgress=function(t){r.bar.fillRect(10,10,300*t,30),r.pct.setText(Math.round(100*t)+"%")},r.destroy=function(){r.each((function(t){return t.destroy()}))},r.box=e.add.graphics().fillStyle(8947848,.3).fillRect(0,0,320,50).setX(-160).setY(-25),r.bar=e.add.graphics().setX(-160).setY(-25),r.loading=e.add.bitmapText(0,-60,"deadman","Loading...",36).setOrigin(.5).setTint(16777215).setCenterAlign(),r.pct=e.add.bitmapText(0,0,"deadman","0%",24).setOrigin(.5).setTint(16777215).setCenterAlign(),r.add([r.box,r.bar,r.loading,r.pct]),r.scene.add.existing(r),r}return r(e,t),e}(n(0).GameObjects.Container);e.ProgressBar=i},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(10),c=n(1),u=function(t){function e(e,n,o){var r=t.call(this,e,n,o)||this;r.border=e.add.graphics().fillStyle(3622735).fillRect(0,0,c.BOARD_PX_LENGTH,c.BOARD_PX_LENGTH).setX(0).setY(0),r.add([r.border]);for(var i,u,s,f,l=[],_=0;_<c.BOARD_SIZE;_++){l.push([]);for(var d=0;d<c.BOARD_SIZE;d++){var p=new a.MatchTile(r,e,_,d,_*c.TILE_SIZE+c.BOARD_BORDER_SIZE,d*c.TILE_SIZE+c.BOARD_BORDER_SIZE);l[_].push(p),r.add(p)}}r.scene.add.existing(r);var E,h=0,I=0;return r.scene.input.on("pointerdown",(function(t,e){console.log("pointerDown"),u=t.x,s=t.y})),r.scene.input.on("dragstart",(function(t,e){console.log("dragStart"),(i=Math.abs(u-t.x)<=Math.abs(s-t.y))?(f=l[e.boardX],E=e.boardX):(f=l.map((function(t){return t[e.boardY]})),E=e.boardY)})),r.scene.input.on("drag",(function(t,n,o,u){var s;if(i?(s=u-n.origY,f.forEach((function(t){return t.setY(t.origY+s)}))):(s=o-n.origX,f.forEach((function(t){return t.setX(t.origX+s)}))),s/c.TILE_SIZE>I){console.log(s/c.TILE_SIZE,I),I++,console.log(I);var l=new a.MatchTile(r,e,0,0,f[0].x-(i?0:c.TILE_SIZE),f[0].y-(i?c.TILE_SIZE:0),f[0].origX-(i?0:c.TILE_SIZE),f[0].origY-(i?c.TILE_SIZE:0),f[c.BOARD_SIZE-1].color);f.unshift(l),r.add(l)}if(s/c.TILE_SIZE<-h){console.log(s/c.TILE_SIZE,h),h++,console.log(h);l=new a.MatchTile(r,e,0,0,f[f.length-1].x+(i?0:c.TILE_SIZE),f[f.length-1].y+(i?c.TILE_SIZE:0),f[f.length-1].origX+(i?0:c.TILE_SIZE),f[f.length-1].origY+(i?c.TILE_SIZE:0),f[f.length-c.BOARD_SIZE].color);f.push(l),r.add(l)}})),r.scene.input.on("dragend",(function(t,e){var n;if(console.log("dragEnd"),i){var o=(e.y-e.origY)%c.TILE_SIZE;0!==o&&(Math.abs(o)<=c.TILE_SIZE/2?f.forEach((function(t){return t.setY(t.y-o)})):f.forEach((function(t){return t.setY(t.y+Math.sign(o)*c.TILE_SIZE-o)}))),n=e.y-e.origY}else{var a=(e.x-e.origX)%c.TILE_SIZE;0!==a&&(Math.abs(a)<=c.TILE_SIZE/2?f.forEach((function(t){return t.setX(t.x-a)})):f.forEach((function(t){return t.setX(t.x+Math.sign(a)*c.TILE_SIZE-a)}))),n=e.x-e.origX}var u=n/c.TILE_SIZE,s=Math.abs(u-I),_=Math.abs(u+h);console.log(u,h,I),console.log(s,_);var d=[],p=f.reduce((function(t,e,n){return n<s?d.push(e):f.length-n<=_?d.push(e):t.push(e),t}),[]);d.forEach((function(t){return r.remove(t,!0)})),console.log("sibct",p.length),i?(p.forEach((function(t,e){return t.updateBoardXY(E,e)})),l[E]=p):(p.forEach((function(t,e){return t.updateBoardXY(e,E)})),l.forEach((function(t,e){return t[E]=p[e]}))),h=0,I=0})),r}return r(e,t),e}(i.GameObjects.Container);e.MatchBoard=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(1),c=[15037299,12216520,7964363,5227511,5093036,11457921,16773494,16758605],u=function(t){function e(e,n,o,r,u,s,f,l,_){var d=t.call(this,n,u,s)||this;return d.updateBoardXY=function(t,e){d.boardX=t,d.boardY=e,d.origX=d.x,d.origY=d.y},d.board=e,d.boardX=o,d.boardY=r,d.isDragging=!1,d.origX=f||u,d.origY=l||s,d.color=_||c[Phaser.Math.RND.integerInRange(0,c.length-1)],d.tile=n.add.graphics().fillStyle(d.color).fillRect(0,0,.9*a.TILE_SIZE,.9*a.TILE_SIZE).setX(5).setY(5),d.add(d.tile),d.setInteractive(new i.Geom.Rectangle(0,0,a.TILE_SIZE,a.TILE_SIZE),i.Geom.Rectangle.Contains),d.add(d.tile),d.scene.add.existing(d),console.log(d),d.scene.input.dragDistanceThreshold=5,d.scene.input.setDraggable(d),d}return r(e,t),e}(i.GameObjects.Container);e.MatchTile=u}]);