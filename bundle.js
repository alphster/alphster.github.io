!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PIXELS_PER_TILE=16,t.WORLD_SIZE={x:150,y:150},t.WORLD_SIZE_PIXELS={x:t.WORLD_SIZE.x*t.PIXELS_PER_TILE,y:t.WORLD_SIZE.y*t.PIXELS_PER_TILE};t.GRASS_FRAME=[888,889];t.BUSH_FRAME=[512,513,514,515,516,517],t.BUSH_MAX_COUNT=t.WORLD_SIZE.x*t.WORLD_SIZE.y*.05,t.TREE_MAX_COUNT=t.WORLD_SIZE.x*t.WORLD_SIZE.y*.05,t.RPG_GRASS_FRAME=[5,62],t.RPG_BERRY_BUSH=[537,594,651],t.RPG_FIRE=[470,471],t.RPG_TREE=[[640,583],[641,584],[642,585],[643,586],[644,587],[645,588],[526],[527],[528],[529],[530],[531]]},function(e,t){e.exports=Phaser},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.U=0]="U",e[e.D=1]="D",e[e.L=2]="L",e[e.R=3]="R"}(t.Direction||(t.Direction={})),function(e){e[e.Bush=0]="Bush",e[e.FirePit=1]="FirePit",e[e.Tree=2]="Tree"}(t.EntityType||(t.EntityType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.randomNumber=function(e){return Math.floor(Math.random()*(e+1))},t.randomWorldTile=function(e,n){var o;void 0===n&&(n=!1);do{o=e.world[t.randomNumber(r.WORLD_SIZE.x-1)][t.randomNumber(r.WORLD_SIZE.y-1)]}while(o.isOccupied()&&!0===n);return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),new(n(5).Game)},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),c=function(e){function t(){var t={type:Phaser.AUTO,width:window.innerWidth,height:window.innerHeight-10,scene:[i.GameScene],physics:{default:"arcade",arcade:{debug:!0}},input:{mouse:{capture:!0}},backgroundColor:"#000033"};return e.call(this,t)||this}return o(t,e),t}(Phaser.Game);t.Game=c},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(7)),s=i(n(8)),u=i(n(9)),a=n(1),p=n(10),f=n(13),_=n(14),l=n(17),d=n(18),y=n(20),h=n(23),m=function(e){function t(){return e.call(this,{key:"GameScene"})||this}return o(t,e),t.prototype.init=function(){console.log("scene init")},t.prototype.preload=function(){console.log("scene preload"),this.load.spritesheet("characters",c.default,{frameHeight:16,frameWidth:16,margin:0,spacing:1}),this.load.spritesheet("city",s.default,{frameHeight:16,frameWidth:16,margin:0,spacing:1}),this.load.spritesheet("rpg",u.default,{frameHeight:16,frameWidth:16,margin:0,spacing:1})},t.prototype.create=function(){console.log("scene create"),this.world=new p.WorldManager(this),this.bushes=new _.BushManager(this),this.trees=new y.TreeManager(this),new l.Bodyx(this,this.world[5][5]),new d.FirePit(this,this.world[4][4]),this.camera=new h.CameraManager(this),this.selectRect=new f.SelectManager(this)},t.prototype.update=function(){},t}(a.Scene);t.GameScene=m},function(e,t,n){e.exports=n.p+"6c8a72cd3c8bd6c0eae11f7999e1949b.png"},function(e,t,n){e.exports=n.p+"85c80634875d554181455c6ef0391f13.png"},function(e,t,n){e.exports=n.p+"fb458f04870ebd7fd1bb0f2e6e2ccf5e.png"},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),c=n(0),s=function(e){function t(t){var n=e.call(this)||this;n.scene=t;for(var r=c.PIXELS_PER_TILE/2,o=0;o<c.WORLD_SIZE.y;o++)for(var s=0;s<c.WORLD_SIZE.x;s++)0===o&&n.push(new Array),n[s].push(new i.WorldTile(t,{x:s,y:o,xPx:r+c.PIXELS_PER_TILE*s,yPx:r+c.PIXELS_PER_TILE*o}));return n}return o(t,e),t}(Array);t.WorldManager=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=n(2),i=function(){return function(e,t){var n=this;this.move=function(e){var t;switch(e){case o.Direction.U:t=n.scene.world[n.pos.x][n.pos.y-1];break;case o.Direction.D:t=n.scene.world[n.pos.x][n.pos.y+1];break;case o.Direction.L:t=n.scene.world[n.pos.x-1][n.pos.y];break;case o.Direction.R:t=n.scene.world[n.pos.x+1][n.pos.y]}return t},this.isOccupied=function(){return void 0!==n.entity},this.scene=e,this.pos=t,this.items=new Array,this.environmentTile=new r.EnvironmentTile(e,t)}}();t.WorldTile=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=n(0),s=n(3),u=function(e){function t(t,n){var r=e.call(this,t,n.xPx,n.yPx,null)||this;return r.preUpdate=function(){console.log("Map preupdate not running")},r.randomGrass=function(){return c.RPG_GRASS_FRAME[s.randomNumber(c.GRASS_FRAME.length-1)]},r.setTexture("rpg",r.randomGrass()),r.scene.add.existing(r),r.setActive(!1),r}return o(t,e),t}(i.GameObjects.Image);t.EnvironmentTile=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=e.call(this,t,0,0,0,0,7400580,.3)||this;return n.preUpdate=function(){n.scene.game.input.mousePointer.isDown?!1===n.visible?(n.visible=!0,n.setPosition(n.scene.game.input.mousePointer.worldX,n.scene.game.input.mousePointer.worldY)):n.setSize(n.scene.game.input.mousePointer.worldX-n.x,n.scene.game.input.mousePointer.worldY-n.y):!0===n.visible&&(n.visible=!1,n.setSize(0,0))},n.scene.add.existing(n),n.visible=!1,n}return o(t,e),t}(n(1).GameObjects.Rectangle);t.SelectManager=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),c=n(0),s=n(3),u=function(e){function t(t){var n=e.call(this)||this;n.addBush=function(e){var t=new i.Bush(n.scene,e);n.push(t),e.entity=t},n.scene=t;for(var r=c.BUSH_MAX_COUNT;r>0;){var o=s.randomWorldTile(t,!0);n.addBush(o),r--}return n}return o(t,e),t}(Array);t.BushManager=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(3),s=n(16),u=n(2),a=function(e){function t(t,n){var r=e.call(this,t,n,u.EntityType.Bush)||this;return r.preUpdate=function(){console.log("Map preupdate not running")},r.randomBush=function(){return i.RPG_BERRY_BUSH[c.randomNumber(i.RPG_BERRY_BUSH.length-1)]},r.setTexture("rpg",r.randomBush()),r.scene.add.existing(r),r}return o(t,e),t}(s.WorldEntityImage);t.Bush=a},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r){var o=e.call(this,t,n.pos.xPx,n.pos.yPx,null)||this;return o.entityType=r,o.tile=n,o.setActive(!1),o}return o(t,e),t}(n(1).GameObjects.Image);t.WorldEntityImage=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=n(2),s=n(0),u=function(e){function t(t,n){var r=e.call(this,t,n.pos.xPx,n.pos.yPx,"characters",324)||this;return r.preUpdate=function(e,t){if(r.moveDirectionQueue.length>0&&r.moveNextTime<=e){r.moveNextTime=e+r.moveTimePerTile;var n=r.moveDirectionQueue.shift();r.tile=r.tile.move(n),r.animDirection=n,r.animDistanceRemaining=s.PIXELS_PER_TILE}if(void 0!==r.animDirection){var o=t/r.animTimePerTile*s.PIXELS_PER_TILE;switch(r.animDirection){case c.Direction.U:r.y-=o;break;case c.Direction.D:r.y+=o;break;case c.Direction.L:r.x-=o;break;case c.Direction.R:r.x+=o}r.animDistanceRemaining-=o,r.animDistanceRemaining<=0&&(r.animDirection=void 0,r.setPosition(r.tile.pos.xPx,r.tile.pos.yPx))}},r.tile=n,r.scene.add.existing(r),r.moveTimePerTile=250,r.animTimePerTile=r.moveTimePerTile/1.6,r.moveNextTime=0,r.moveDirectionQueue=new Array,r.moveDirectionQueue.push(c.Direction.R),r.moveDirectionQueue.push(c.Direction.R),r.moveDirectionQueue.push(c.Direction.D),r.moveDirectionQueue.push(c.Direction.R),r.moveDirectionQueue.push(c.Direction.D),r.moveDirectionQueue.push(c.Direction.D),r.moveDirectionQueue.push(c.Direction.L),r.moveDirectionQueue.push(c.Direction.L),r}return o(t,e),t}(i.GameObjects.Image);t.Bodyx=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),c=n(2),s=n(0),u=function(e){function t(t,n){var r=e.call(this,t,n,c.EntityType.FirePit)||this;return r.animateTime=200,r.scene.anims.exists("FirePit")||r.scene.anims.create({key:"FirePit",frames:r.scene.anims.generateFrameNumbers("rpg",{frames:s.RPG_FIRE}),frameRate:5,repeat:-1}),r.scene.add.existing(r),r.tile.entity=r,r.anims.play("FirePit",!0),r}return o(t,e),t}(i.WorldEntitySprite);t.FirePit=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r){var o=e.call(this,t,n.pos.xPx,n.pos.yPx,null)||this;return o.entityType=r,o.tile=n,o}return o(t,e),t}(n(1).GameObjects.Sprite);t.WorldEntitySprite=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),c=n(0),s=n(3),u=function(e){function t(t){var n=e.call(this)||this;n.addTree=function(e){var t=new i.Tree(n.scene,e);n.push(t),e.entity=t},n.scene=t;for(var r=c.TREE_MAX_COUNT;r>0;){var o=s.randomWorldTile(t,!0);n.addTree(o),r--}return n}return o(t,e),t}(Array);t.TreeManager=u},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),c=n(3),s=n(2),u=n(22),a=n(1),p=function(e){function t(t,n){var r=e.call(this,t,n,s.EntityType.Tree)||this;r.randomTree=function(){return i.RPG_TREE[c.randomNumber(i.RPG_TREE.length-1)]};var o=r.randomTree();if(o.length>1){var u=new a.GameObjects.Sprite(t,0,0,"rpg",o[0]),p=new a.GameObjects.Sprite(t,0,-i.PIXELS_PER_TILE,"rpg",o[1]);p.setDepth(1),u.setDepth(0),r.add([u,p])}else{var f=new a.GameObjects.Sprite(t,0,0,"rpg",o[0]);r.add(f)}return r.scene.add.existing(r),r}return o(t,e),t}(u.WorldEntityContainer);t.Tree=p},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,n,r){var o=e.call(this,t,n.pos.xPx,n.pos.yPx,null)||this;return o.entityType=r,o.tile=n,o.setActive(!1),o}return o(t,e),t}(n(1).GameObjects.Container);t.WorldEntityContainer=i},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=n(0),s=n(2),u=function(e){function t(t){var n=e.call(this,t,"CameraManager")||this;n.preUpdate=function(){n.cursorkeys.up.isDown?(n.scene.cameras.main.scrollY-=10,n.optimizeRenders(s.Direction.U)):n.cursorkeys.down.isDown&&(n.scene.cameras.main.scrollY+=10,n.optimizeRenders(s.Direction.D)),n.cursorkeys.left.isDown?(n.scene.cameras.main.scrollX-=10,n.optimizeRenders(s.Direction.L)):n.cursorkeys.right.isDown&&(n.scene.cameras.main.scrollX+=10,n.optimizeRenders(s.Direction.R))},n.optimizeRenders=function(e){for(var t=n.scene.world,r=n.scene.cameras.main,o=r.worldView.left,i=r.worldView.right,c=r.worldView.top,s=r.worldView.bottom,u=0,a=t;u<a.length;u++)for(var p=0,f=a[u];p<f.length;p++){var _=f[p];_.pos.xPx>o+20&&_.pos.xPx<i-20&&_.pos.yPx<s-20&&_.pos.yPx>c+20?(void 0!==_.entity&&_.entity.setVisible(!0),_.environmentTile.setVisible(!0)):(void 0!==_.entity&&_.entity.setVisible(!1),_.environmentTile.setVisible(!1))}},n.cursorkeys=t.input.keyboard.createCursorKeys();var r=n.scene.cameras.main;return r.setBounds(0,0,c.WORLD_SIZE_PIXELS.x,c.WORLD_SIZE_PIXELS.y),n.lastTileX=0,n.lastTileY=0,n.tileWidthX=Math.floor(r.worldView.width/c.PIXELS_PER_TILE)+1,n.tileWidthY=Math.floor(r.worldView.height/c.PIXELS_PER_TILE)+1,n.scene.add.existing(n),n}return o(t,e),t}(i.GameObjects.GameObject);t.CameraManager=u}]);